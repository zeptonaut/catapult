<!DOCTYPE html>
<!--
Copyright (c) 2013 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="/tracing/ui/base/deep_utils.html">

<dom-module id='tr-ui-b-deep-utils-test-a'>
  <template>
    <div></div>
  </template>
  <script>
  'use strict';

  Polymer({
    is: 'tr-ui-b-deep-utils-test-a'
  });
  </script>
</dom-module>

<dom-module id='tr-ui-b-deep-utils-test-b'>
  <template>
    <div></div>
  </template>
  <script>
  'use strict';

  Polymer({
    is: 'tr-ui-b-deep-utils-test-b'
  });
  </script>
</dom-module>

<dom-module id='tr-ui-b-deep-utils-test-c'>
  <template>
    <tr-ui-b-deep-utils-test-b class='x'></tr-ui-b-deep-utils-test-b>
    <tr-ui-b-deep-utils-test-a class='x'></tr-ui-b-deep-utils-test-a>
    <tr-ui-b-deep-utils-test-a class='x'></tr-ui-b-deep-utils-test-a>
  </template>
  <script>
  'use strict';

  Polymer({
    is: 'tr-ui-b-deep-utils-test-c'
  });
  </script>
</dom-module>

<dom-module id='tr-ui-b-deep-utils-test-d'>
  <template>
    <tr-ui-b-deep-utils-test-c></tr-ui-b-deep-utils-test-c>
  </template>
  <script>
  'use strict';

  Polymer({
    is: 'tr-ui-b-deep-utils-test-d'
  });
  </script>
</dom-module>
<script>
'use strict';

tr.b.unittest.testSuite(function() {
  test('testFindDeepElementMatching', function() {
    var a = document.createElement('tr-ui-b-deep-utils-test-d');

    var m = tr.b.findDeepElementMatching(a, 'tr-ui-b-deep-utils-test-b.x');
    assert.isDefined(m);
    assert.equal(m.tagName, 'TR-UI-B-DEEP-UTILS-TEST-B');
  });

  test('testFindDeepElementsMatching', function() {
    var a = document.createElement('tr-ui-b-deep-utils-test-d');

    var m = tr.b.findDeepElementsMatching(a, 'tr-ui-b-deep-utils-test-a.x');
    assert.isDefined(m);
    assert.equal(m[0].tagName, 'TR-UI-B-DEEP-UTILS-TEST-A');
    assert.equal(m[1].tagName, 'TR-UI-B-DEEP-UTILS-TEST-A');
  });
});
</script>
